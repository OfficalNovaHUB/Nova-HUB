local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")
local CoreGui = game:GetService("CoreGui")
local ParentContainer = (gethui and gethui()) or CoreGui

-- CONFIG
local API_URL = "http://51.83.6.7:20284/check?key="
local DISCORD_LINK = "https://discord.gg/MPsXpy5KeA"

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NovaHub_KeySystem"
ScreenGui.Parent = ParentContainer
ScreenGui.ResetOnSpawn = false

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 380, 0, 260)
MainFrame.Position = UDim2.new(0.5, -190, 0.5, -130)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 30)
MainFrame.BackgroundTransparency = 0.3
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 15)

local UIGradient = Instance.new("UIGradient")
UIGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(10, 10, 55)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(130, 40, 220))
})
UIGradient.Rotation = 45
UIGradient.Parent = MainFrame

local UIStroke = Instance.new("UIStroke")
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(160, 100, 255)
UIStroke.Transparency = 0.4
UIStroke.Parent = MainFrame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 60)
Title.BackgroundTransparency = 1
Title.Text = "NOVA HUB"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 26
Title.Font = Enum.Font.GothamBold
Title.Parent = MainFrame

local KeyInput = Instance.new("TextBox")
KeyInput.Size = UDim2.new(0.85, 0, 0, 45)
KeyInput.Position = UDim2.new(0.075, 0, 0.3, 0)
KeyInput.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
KeyInput.BackgroundTransparency = 0.7
KeyInput.PlaceholderText = "Enter Key..."
KeyInput.Text = ""
KeyInput.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyInput.TextSize = 16
KeyInput.Font = Enum.Font.Gotham
KeyInput.Parent = MainFrame
Instance.new("UICorner", KeyInput).CornerRadius = UDim.new(0, 10)

local CheckButton = Instance.new("TextButton")
CheckButton.Size = UDim2.new(0.4, 0, 0, 45)
CheckButton.Position = UDim2.new(0.075, 0, 0.55, 0)
CheckButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
CheckButton.BackgroundTransparency = 0.9
CheckButton.Text = "VERIFY"
CheckButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CheckButton.TextSize = 14
CheckButton.Font = Enum.Font.GothamBold
CheckButton.Parent = MainFrame
Instance.new("UICorner", CheckButton).CornerRadius = UDim.new(0, 10)

local GetKeyButton = Instance.new("TextButton")
GetKeyButton.Size = UDim2.new(0.4, 0, 0, 45)
GetKeyButton.Position = UDim2.new(0.525, 0, 0.55, 0)
GetKeyButton.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
GetKeyButton.BackgroundTransparency = 0.4
GetKeyButton.Text = "GET KEY"
GetKeyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
GetKeyButton.TextSize = 14
GetKeyButton.Font = Enum.Font.GothamBold
GetKeyButton.Parent = MainFrame
Instance.new("UICorner", GetKeyButton).CornerRadius = UDim.new(0, 10)

local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1, 0, 0, 30)
Status.Position = UDim2.new(0, 0, 0.85, 0)
Status.BackgroundTransparency = 1
Status.Text = "Waiting for input..."
Status.TextColor3 = Color3.fromRGB(200, 200, 200)
Status.TextSize = 12
Status.Font = Enum.Font.Gotham
Status.Parent = MainFrame

GetKeyButton.MouseButton1Click:Connect(function()
    setclipboard(DISCORD_LINK)
    Status.Text = "Discord Link copied to clipboard!"
    wait(2)
    Status.Text = "Waiting for input..."
end)

CheckButton.MouseButton1Click:Connect(function()
    local key = KeyInput.Text
    if key == "" then return end
    Status.Text = "Verifying..."
    
    local success, response = pcall(function()
        return game:HttpGet(API_URL .. key)
    end)
    
    if success and response == "valid" then
        Status.Text = "Access Granted!"
        Status.TextColor3 = Color3.fromRGB(0, 255, 150)
        wait(1)
        ScreenGui:Destroy()
        
        -- HIER DEIN OBFUSKIERTES SCRIPT LADEN:
        loadstring(game:HttpGet("https://raw.githubusercontent.com/OfficalNovaHUB/Nova-HUB/refs/heads/main/part5"))()
    else
        Status.Text = "Invalid or Expired Key!"
        Status.TextColor3 = Color3.fromRGB(255, 50, 50)
    end
end)
